/**
 * @license MeeusSunMoon v2.0.0
 * (c) 2018 Jan Greis
 * licensed under MIT
 */

const deg2rad=function(n){return.017453292519943295*n},rad2deg=function(n){return 57.29577951308232*n},sind=function(n){return Math.sin(deg2rad(n))},cosd=function(n){return Math.cos(deg2rad(n))},reduceAngle=function(n){return n-360*Math.floor(n/360)},polynomial=function(n,e){let t=1,o=0;const i=e.length;for(let r=0;r<i;r++)o+=t*e[r],t*=n;return o},interpolateFromThree=function(n,e,t,o,i){let r=e-n,s=t-e;return void 0!==i&&i&&(r<0&&(r+=360),s<0&&(s+=360)),e+o/2*(r+s+o*(s-r))},datetimeToJD=function(n){let e=n.year(),t=n.month()+1;const o=n.date()+(n.hour()+(n.minute()+n.second()/60)/60)/24;t<3&&(e-=1,t+=12);const i=Math.floor(e/100),r=moment("1582-10-15T12:00:00Z");let s=0;return n.isAfter(r)&&(s=2-i+Math.floor(i/4)),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+o+s-1524.5},JDToDatetime=function(n){n+=.5;const e=Math.floor(n),t=n-e;let o=e;if(e>=2299161){const n=Math.floor((e-1867216.25)/36524.25);o+=1+n-Math.floor(n/4)}const i=o+1524,r=Math.floor((i-122.1)/365.25),s=Math.floor(365.25*r),a=Math.floor((i-s)/30.6001),u=i-s-Math.floor(30.6001*a)+t,d=Math.floor(u),c=Math.floor(24*(u-d)),l=Math.floor(60*(24*(u-d)-c)),m=Math.floor(60*(60*(24*(u-d)-c)-l));let f=a-1;a>13&&(f-=12);let M=r-4715;f>2&&(M-=1);const g=moment.tz("2000-01-01T12:00:00","UTC");return g.year(M),g.month(f-1),g.date(d),g.hour(c),g.minute(l),g.second(m),g},JDToT=function(n){return(n-2451545)/36525},datetimeToT=function(n){return(datetimeToJD(n)-2451545)/36525},DeltaT=function(n){let e,t,o,i=n.year();switch(i+=(n.month()+.5)/12,!0){case i<-1999:o=!1;break;case i<-500:o=32*(e=(i-1820)/100)*e-20;break;case i<500:o=10583.6-1014.41*(e=i/100)+33.78311*e*e-5.952053*e*e*e-.1798452*e*e*e*e+.022174192*e*e*e*e*e+.0090316521*e*e*e*e*e*e;break;case i<1600:o=1574.2-556.01*(e=(i-1e3)/100)+71.23472*e*e+.319781*e*e*e-.8503463*e*e*e*e-.005050998*e*e*e*e*e+.0083572073*e*e*e*e*e*e;break;case i<1700:o=120-.9808*(t=i-1600)-.01532*t*t+t*t*t/7129;break;case i<1800:o=8.83+.1603*(t=i-1700)-.0059285*t*t+13336e-8*t*t*t-t*t*t*t/1174e3;break;case i<1860:o=13.72-.332447*(t=i-1800)+.0068612*t*t+.0041116*t*t*t-37436e-8*t*t*t*t+121272e-10*t*t*t*t*t-1.699e-7*t*t*t*t*t*t+8.75e-10*t*t*t*t*t*t*t;break;case i<1900:o=7.62+.5737*(t=i-1860)-.251754*t*t+.01680668*t*t*t-.0004473624*t*t*t*t+t*t*t*t*t/233174;break;case i<1920:o=1.494119*(t=i-1900)-2.79-.0598939*t*t+.0061966*t*t*t-197e-6*t*t*t*t;break;case i<1941:o=21.2+.84493*(t=i-1920)-.0761*t*t+.0020936*t*t*t;break;case i<1961:o=29.07+.407*(t=i-1950)-t*t/233+t*t*t/2547;break;case i<1986:o=45.45+1.067*(t=i-1975)-t*t/260-t*t*t/718;break;case i<2005:o=63.86+.3345*(t=i-2e3)-.060374*t*t+.0017275*t*t*t+651814e-9*t*t*t*t+2373599e-11*t*t*t*t*t;break;case i<2050:o=62.92+.32217*(t=i-2e3)+.005589*t*t;break;case i<2150:o=(i-1820)/100*32*((i-1820)/100)-20-.5628*(2150-i);break;default:o=32*(e=(i-1820)/100)*e-20}return o},approxK=function(n){return 12.3685*(n.year()+(n.month()+1)/12+n.date()/365.25-2e3)},kToT=function(n){return n/1236.85},truePhase=function(n,e){const t=kToT(n+=e/4),o=eccentricityCorrection(t);let i=meanPhase(t,n);const r=sunMeanAnomaly(t,n),s=moonMeanAnomaly(t,n),a=moonArgumentOfLatitude(t,n),u=moonAscendingNodeLongitude(t,n),d=planetaryArguments(t,n);let c=0;return 0===e||2===e?c+=newMoonFullMoonCorrections(o,r,s,a,u,e):1!==e&&3!==e||(c+=quarterCorrections(o,r,s,a,u,e)),i+=c+=commonCorrections(d)},meanPhase=function(n,e){return 2451550.09766+29.530588861*e+15437e-8*n*n-1.5e-7*n*n*n+7.3e-10*n*n*n*n},sunMeanAnomaly=function(n,e){return 2.5534+29.1053567*e-14e-7*n*n-1.1e-7*n*n*n},moonMeanAnomaly=function(n,e){return 201.5643+385.81693528*e+.0107582*n*n+1238e-8*n*n*n-5.8e-8*n*n*n*n},moonArgumentOfLatitude=function(n,e){return 160.7108+390.67050284*e-.0016118*n*n-227e-8*n*n*n+1.1e-8*n*n*n*n},moonAscendingNodeLongitude=function(n,e){return 124.7746-1.56375588*e+.0020672*n*n+215e-8*n*n*n},eccentricityCorrection=function(n){return 1-.002516*n-74e-7*n*n},planetaryArguments=function(n,e){const t=[];return t[0]=0,t[1]=299.77+.107408*e-.009173*n*n,t[2]=251.88+.016321*e,t[3]=251.83+26.651886*e,t[4]=349.42+36.412478*e,t[5]=84.66+18.206239*e,t[6]=141.74+53.303771*e,t[7]=207.14+2.453732*e,t[8]=154.84+7.30686*e,t[9]=34.52+27.261239*e,t[10]=207.19+.121824*e,t[11]=291.34+1.844379*e,t[12]=161.72+24.198154*e,t[13]=239.56+25.513099*e,t[14]=331.55+3.592518*e,t},commonCorrections=function(n){return 325e-6*sind(n[1])+165e-6*sind(n[2])+164e-6*sind(n[3])+126e-6*sind(n[4])+11e-5*sind(n[5])+62e-6*sind(n[6])+6e-5*sind(n[7])+56e-6*sind(n[8])+47e-6*sind(n[9])+42e-6*sind(n[10])+4e-5*sind(n[11])+37e-6*sind(n[12])+35e-6*sind(n[13])+23e-6*sind(n[14])},newMoonFullMoonCorrections=function(n,e,t,o,i,r){let s=-.00111*sind(t-2*o)-57e-5*sind(t+2*o)+56e-5*n*sind(2*t+e)-42e-5*sind(3*t)+42e-5*n*sind(e+2*o)+38e-5*n*sind(e-2*o)-24e-5*n*sind(2*t-e)-17e-5*sind(i)-7e-5*sind(t+2*e)+4e-5*sind(2*t-2*o)+4e-5*sind(3*e)+3e-5*sind(t+e-2*o)+3e-5*sind(2*t+2*o)-3e-5*sind(t+e+2*o)+3e-5*sind(t-e+2*o)-2e-5*sind(t-e-2*o)-2e-5*sind(3*t+e)+2e-5*sind(4*t);return 0===r?s+=-.4072*sind(t)+.17241*n*sind(e)+.01608*sind(2*t)+.01039*sind(2*o)+.00739*n*sind(t-e)-.00514*n*sind(t+e)+.00208*n*n*sind(2*e):2===r&&(s+=-.40614*sind(t)+.17302*n*sind(e)+.01614*sind(2*t)+.01043*sind(2*o)+.00734*n*sind(t-e)-.00515*n*sind(t+e)+.00209*n*n*sind(2*e)),s},quarterCorrections=function(n,e,t,o,i,r){let s=-.62801*sind(t)+.17172*n*sind(e)-.01183*n*sind(t+e)+.00862*sind(2*t)+.00804*sind(2*o)+.00454*n*sind(t-e)+.00204*n*n*sind(2*e)-.0018*sind(t-2*o)-7e-4*sind(t+2*o)-4e-4*sind(3*t)-34e-5*n*sind(2*t-e)+32e-5*n*sind(e+2*o)+32e-5*n*sind(e-2*o)-28e-5*n*n*sind(t+2*e)+27e-5*n*sind(2*t+e)-17e-5*sind(i)-5e-5*sind(t-e-2*o)+4e-5*sind(2*t+2*o)-4e-5*sind(t+e+2*o)+4e-5*sind(t-2*e)+3e-5*sind(t+e-2*o)+3e-5*sind(3*e)+2e-5*sind(2*t-2*o)+2e-5*sind(t-e+2*o)-2e-5*sind(3*t+e);const a=.00306-38e-5*n*cosd(e)+26e-5*cosd(t)-2e-5*cosd(t-e)+2e-5*cosd(t+e)+2e-5*cosd(2*o);return 1===r?s+=a:3===r&&(s-=a),s},sunMeanAnomaly$1=[357.52772,35999.05034,-1603e-7,-1/3e5],sunMeanLongitude=[280.46646,36000.76983,3032e-7],meanObliquityOfEcliptic=[84381.448/3600,-4680.93/3600,-1.55/3600,1999.25/3600,-51.38/3600,-249.67/3600,-39.05/3600,7.12/3600,27.87/3600,5.79/3600,2.45/3600],moonArgumentOfLatitude$1=[93.27191,483202.017538,-.0036825,1/327270],moonAscendingNodeLongitude$1=[125.04452,-1934.136261,.0020708,1/45e4],moonMeanAnomaly$1=[134.96298,477198.867398,.0086972,1/56250],moonMeanElongation=[297.85036,445267.11148,-.0019142,1/189474],nutations=[[0,0,0,0,1,-171996,-174.2,92025,8.9],[-2,0,0,2,2,-13187,-1.6,5736,-3.1],[0,0,0,2,2,-2274,-.2,977,-.5],[0,0,0,0,2,2062,.2,-895,.5],[0,1,0,0,0,1426,-3.4,54,-.1],[0,0,1,0,0,712,.1,-7,0],[-2,1,0,2,2,-517,1.2,224,-.6],[0,0,0,2,1,-386,-.4,200,0],[0,0,1,2,2,-301,0,129,-.1],[-2,-1,0,2,2,217,-.5,-95,.3],[-2,0,1,0,0,-158,0,0,0],[-2,0,0,2,1,129,.1,-70,0],[0,0,-1,2,2,123,0,-53,0],[2,0,0,0,0,63,0,0,0],[0,0,1,0,1,63,.1,-33,0],[2,0,-1,2,2,-59,0,26,0],[0,0,-1,0,1,-58,-.1,32,0],[0,0,1,2,1,-51,0,27,0],[-2,0,2,0,0,48,0,0,0],[0,0,-2,2,1,46,0,-24,0],[2,0,0,2,2,-38,0,16,0],[0,0,2,2,2,-31,0,13,0],[0,0,2,0,0,29,0,0,0],[-2,0,1,2,2,29,0,-12,0],[0,0,0,2,0,26,0,0,0],[-2,0,0,2,0,-22,0,0,0],[0,0,-1,2,1,21,0,-10,0],[0,2,0,0,0,17,-.1,0,0],[2,0,-1,0,1,16,0,-8,0],[-2,2,0,2,2,-16,.1,7,0],[0,1,0,0,1,-15,0,9,0],[-2,0,1,0,1,-13,0,7,0],[0,-1,0,0,1,-12,0,6,0],[0,0,2,-2,0,11,0,0,0],[2,0,-1,2,1,-10,0,5,0],[2,0,1,2,2,-8,0,3,0],[0,1,0,2,2,7,0,-3,0],[-2,1,1,0,0,-7,0,0,0],[0,-1,0,2,2,-7,0,3,0],[2,0,0,2,1,-7,0,3,0],[2,0,1,0,0,6,0,0,0],[-2,0,2,2,2,6,0,-3,0],[-2,0,1,2,1,6,0,-3,0],[2,0,-2,0,1,-6,0,3,0],[2,0,0,0,1,-6,0,3,0],[0,-1,1,0,0,5,0,0,0],[-2,-1,0,2,1,-5,0,3,0],[-2,0,0,0,1,-5,0,3,0],[0,0,2,2,1,-5,0,3,0],[-2,0,2,0,1,4,0,0,0],[-2,1,0,2,1,4,0,0,0],[0,0,1,-2,0,4,0,0,0],[-1,0,1,0,0,-4,0,0,0],[-2,1,0,0,0,-4,0,0,0],[1,0,0,0,0,-4,0,0,0],[0,0,1,2,0,3,0,0,0],[0,0,-2,2,2,-3,0,0,0],[-1,-1,1,0,0,-3,0,0,0],[0,1,1,0,0,-3,0,0,0],[0,-1,1,2,2,-3,0,0,0],[2,-1,-1,2,2,-3,0,0,0],[0,0,3,2,2,3,0,0,0],[2,-1,0,2,2,-3,0,0,0]],sunTransit=function(n,e){const t=n.tz(),o=moment.tz([n.year(),n.month(),n.date(),0,0,0],"UTC"),i=DeltaT(o),r=datetimeToT(o),s=apparentSiderealTimeGreenwhich(r);let a=(sunApparentRightAscension(r-i/315576e4)-e-s)/360;return a=normalizeM(a,n.utcOffset()),a+=sunTransitCorrection(r,s,i,e,a),o.add(Math.floor(3600*a*24+.5),"seconds"),roundToNearestMinute&&(o.add(30,"seconds"),o.second(0)),o.tz(t),o},sunRiseSet=function(n,e,t,o){const i=n.tz(),r=moment.tz([n.year(),n.month(),n.date(),0,0,0],"UTC"),s=DeltaT(r),a=datetimeToT(r),u=apparentSiderealTimeGreenwhich(a),d=a-s/315576e4,c=sunApparentRightAscension(d),l=sunApparentDeclination(d),m=approxLocalHourAngle(e,l);let f,M=(c-t-u)/360;if(M=normalizeM(M,n.utcOffset()),"RISE"===o)f=M-m/360;else{if("SET"!==o)return!1;f=M+m/360}let g=0,p=1;for(;Math.abs(p)>1e-4&&g<3;)f+=p=sunRiseSetCorrection(a,u,s,e,t,f),g++;return f>0?r.add(Math.floor(3600*f*24+.5),"seconds"):r.subtract(Math.floor(3600*Math.abs(f)*24+.5),"seconds"),roundToNearestMinute&&(r.add(30,"seconds"),r.second(0)),r.tz(i),r},returnPNMS=function(n,e,t){return returnTimeForPNMS&&(e.isDST()&&(t+=1),n.tz(e.tz()).year(e.year()).month(e.month()).date(e.date()).hour(t).minute(0).second(0)),n},approxLocalHourAngle=function(n,e){const t=(sind(-50/60)-sind(n)*sind(e))/(cosd(n)*cosd(e));if(t<-1)throw returnTimeForPNMS?moment.tz("**2000-01-01 12:00:00","YYYY-MM-DD HH:mm:ss","Europe/London"):"MS";if(t>1)throw returnTimeForPNMS?moment.tz("--2000-01-01 12:00:00","YYYY-MM-DD HH:mm:ss","Europe/London"):"PN";return rad2deg(Math.acos(t))},normalizeM=function(n,e){const t=n+e/1440;return t<0?n+1:t>1?n-1:n},sunTransitCorrection=function(n,e,t,o,i){const r=e+360.985647*i,s=interpolatedRa(n,i+t/864e3);return-localHourAngle(r,o,s)/360},sunRiseSetCorrection=function(n,e,t,o,i,r){const s=e+360.985647*r,a=r+t/864e3,u=interpolatedRa(n,a),d=interpolatedDec(n,a),c=localHourAngle(s,i,u);return(altitude(o,d,c)+50/60)/(360*cosd(d)*cosd(o)*sind(c))},localHourAngle=function(n,e,t){let o=reduceAngle(n+e-t);return o>180&&(o-=360),o},altitude=function(n,e,t){return rad2deg(Math.asin(sind(n)*sind(e)+cosd(n)*cosd(e)*cosd(t)))},interpolatedRa=function(n,e){const t=sunApparentRightAscension(n-1/36525),o=sunApparentRightAscension(n),i=sunApparentRightAscension(n+1/36525),r=interpolateFromThree(t,o,i,e,!0);return reduceAngle(r)},interpolatedDec=function(n,e){const t=sunApparentDeclination(n-1/36525),o=sunApparentDeclination(n),i=sunApparentDeclination(n+1/36525),r=interpolateFromThree(t,o,i,e);return reduceAngle(r)},sunApparentRightAscension=function(n){const e=moonAscendingNodeLongitude$2(n),t=trueObliquityOfEcliptic(n)+.00256*cosd(e),o=sunApparentLongitude(n),i=rad2deg(Math.atan2(cosd(t)*sind(o),cosd(o)));return reduceAngle(i)},sunApparentDeclination=function(n){const e=moonAscendingNodeLongitude$2(n),t=trueObliquityOfEcliptic(n)+.00256*cosd(e),o=sunApparentLongitude(n);return rad2deg(Math.asin(sind(t)*sind(o)))},apparentSiderealTimeGreenwhich=function(n){const e=meanSiderealTimeGreenwhich(n),t=trueObliquityOfEcliptic(n),o=e+nutationInLongitude(n)*cosd(t);return reduceAngle(o)},meanSiderealTimeGreenwhich=function(n){return 280.46061837+360.98564736629*(36525*n)+387933e-9*n*n-n*n*n/3871e4},trueObliquityOfEcliptic=function(n){return meanObliquityOfEcliptic$1(n)+nutationInObliquity(n)},meanObliquityOfEcliptic$1=function(n){return polynomial(n/100,meanObliquityOfEcliptic)},sunApparentLongitude=function(n){const e=sunTrueLongitude(n),t=moonAscendingNodeLongitude$2(n);return e-.00569-.00478*sind(t)},sunTrueLongitude=function(n){return sunMeanLongitude$1(n)+sunEquationOfCenter(n)},sunEquationOfCenter=function(n){const e=sunMeanAnomaly$2(n);return(1.914602-.004817*n-14e-6*n*n)*sind(e)+(.019993-101e-6*n)*sind(2*e)+29e-5*sind(3*e)},nutationInLongitude=function(n){const e=moonMeanElongation$1(n),t=sunMeanAnomaly$2(n),o=moonMeanAnomaly$2(n),i=moonArgumentOfLatitude$2(n),r=moonAscendingNodeLongitude$2(n);let s,a=0;for(let u=0;u<63;u++)s=nutations[u][0]*e+nutations[u][1]*t+nutations[u][2]*o+nutations[u][3]*i+nutations[u][4]*r,a+=(nutations[u][5]+nutations[u][6]*n)*sind(s);return a/=36e6},nutationInObliquity=function(n){const e=moonMeanElongation$1(n),t=sunMeanAnomaly$2(n),o=moonMeanAnomaly$2(n),i=moonArgumentOfLatitude$2(n),r=moonAscendingNodeLongitude$2(n);let s,a=0;for(let u=0;u<63;u++)s=nutations[u][0]*e+nutations[u][1]*t+nutations[u][2]*o+nutations[u][3]*i+nutations[u][4]*r,a+=(nutations[u][7]+nutations[u][8]*n)*cosd(s);return a/=36e6},moonArgumentOfLatitude$2=function(n){const e=polynomial(n,moonArgumentOfLatitude$1);return reduceAngle(e)},moonAscendingNodeLongitude$2=function(n){const e=polynomial(n,moonAscendingNodeLongitude$1);return reduceAngle(e)},moonMeanAnomaly$2=function(n){const e=polynomial(n,moonMeanAnomaly$1);return reduceAngle(e)},moonMeanElongation$1=function(n){const e=polynomial(n,moonMeanElongation);return reduceAngle(e)},sunMeanAnomaly$2=function(n){const e=polynomial(n,sunMeanAnomaly$1);return reduceAngle(e)},sunMeanLongitude$1=function(n){const e=polynomial(n,sunMeanLongitude);return reduceAngle(e)};let roundToNearestMinute=!1,returnTimeForPNMS=!1,dateFormatKeys={"**":"‡","--":"†"};const options=function(n){"boolean"==typeof n.roundToNearestMinute&&(roundToNearestMinute=n.roundToNearestMinute),"boolean"==typeof n.returnTimeForPNMS&&(returnTimeForPNMS=n.returnTimeForPNMS),"object"==typeof n.dateFormatKeys&&(dateFormatKeys=n.dateFormatKeys)},formatCI=function(n,e){const t=n.creationData().input.slice(0,2);let o=n.format(e);return dateFormatKeys[t]&&(o+=dateFormatKeys[t]),o},sunrise=function(n,e,t){let o;try{o=sunRiseSet(n,e,t,"RISE")}catch(e){return returnPNMS(e,n,6)}return o},sunset=function(n,e,t){let o;try{o=sunRiseSet(n,e,t,"SET")}catch(e){return returnPNMS(e,n,18)}return o},solarNoon=function(n,e){return sunTransit(n,e)},yearMoonPhases=function(n,e,t){const o=moment([n]),i=moment([n+1]);let r=Math.floor(12.3685*((s=o).year()+(s.month()+1)/12+s.date()/365.25-2e3))-1;var s;const a=[];let u,d,c;for(let n=0;n<15;n++)u=truePhase(r,e),d=JDToDatetime(u),(c=DeltaT(d))>0?d.subtract(Math.abs(c),"seconds"):d.add(Math.abs(c),"seconds"),roundToNearestMinute&&(d.add(30,"seconds"),d.second(0)),void 0===t&&(t="UTC"),d.tz(t),d.isAfter(o)&&d.isBefore(i)&&a.push(d),r++;return a};export{options,formatCI,sunrise,sunset,solarNoon,yearMoonPhases,roundToNearestMinute,returnTimeForPNMS};
//# sourceMappingURL=meeussunmoon-es.min.js.map
