{"version":3,"file":"meeussunmoon.min.js","sources":["../src/timeConversions.js","../src/auxMath.js","../src/constants.js","../src/sunTimes.js","../src/moonPhases.js","../src/index.js"],"sourcesContent":["import * as luxon from 'luxon';\n\n/**\n * Converts a datetime in UTC to the corresponding Julian Date (see AA p60f).\n * @param {DateTime} datetime Datetime to be converted.\n * @returns {number} Julian date (fractional number of days since 1 January\n *     4713BC according to the proleptic Julian calendar.\n */\nconst datetimeToJD = function (datetime) {\n    let Y = datetime.year;\n    let M = datetime.month;\n    const D = datetime.day + (datetime.hour + (datetime.minute + datetime.second / 60) / 60) / 24;\n    if (M < 3) {\n        Y -= 1;\n        M += 12;\n    }\n    const A = Math.floor(Y / 100);\n    // Need a different B if we are before introduction of the Gregorian Calendar\n    const gregorianCutoff = luxon.DateTime.fromISO('1582-10-15T12:00:00Z', { zone: 'UTC' });\n    let B = 0;\n    if (datetime > gregorianCutoff) {\n        B = 2 - A + Math.floor(A / 4);\n    }\n    return Math.floor(365.25 * (Y + 4716)) + Math.floor(30.6001 * (M + 1)) + D + B - 1524.5;\n};\n\n/**\n * Converts a Julian Date to the corresponding datetime in UTC (see AA p63).\n * @param {number} JD Julian date to be converted\n * @returns {DateTime} Datetime corresponding to the given Julian date.\n */\nconst JDToDatetime = function (JD) {\n    JD += 0.5;\n    const Z = Math.floor(JD);\n    const F = JD - Z;\n    let A = Z;\n    if (Z >= 2299161) {\n        const alpha = Math.floor((Z - 1867216.25) / 36524.25);\n        A += 1 + alpha - Math.floor(alpha / 4);\n    }\n    const B = A + 1524;\n    const C = Math.floor((B - 122.1) / 365.25);\n    const D = Math.floor(365.25 * C);\n    const E = Math.floor((B - D) / 30.6001);\n    const fracDay = B - D - Math.floor(30.6001 * E) + F;\n    const day = Math.floor(fracDay);\n    const hour = Math.floor((fracDay - day) * 24);\n    const minute = Math.floor(((fracDay - day) * 24 - hour) * 60);\n    const second = Math.floor((((fracDay - day) * 24 - hour) * 60 - minute) * 60);\n    let month = E - 1;\n    if (E > 13) {\n        month -= 12;\n    }\n    let year = C - 4715;\n    if (month > 2) {\n        year -= 1;\n    }\n    return luxon.DateTime.fromISO('2000-01-01T12:00:00Z', { zone: 'UTC' })\n        // eslint-disable-next-line sort-keys\n        .set({ year, month, day, hour, minute, second });\n};\n\n/**\n * Converts a Julian date to the number of Julian centuries since\n * 2000-01-01T12:00:00Z (see AA p87 Eq12.1).\n * @param {number} JD Julian date.\n * @returns {number} T.\n */\nconst JDToT = function (JD) {\n    return (JD - 2451545) / 36525;\n};\n\n/**\n * Converts a datetime in UTC to the number of Julian centuries since\n * 2000-01-01T12:00:00Z.\n * @param {DateTime} datetime Datetime to be converted.\n * @returns {number} T.\n */\nconst datetimeToT = function (datetime) {\n    return JDToT(datetimeToJD(datetime));\n};\n\n/* eslint-disable complexity */\n/**\n * Calculates the value of ΔT=TT−UT (see\n * http://eclipse.gsfc.nasa.gov/SEcat5/deltatpoly.html).\n * @param {DateTime} datetime Datetime for which ΔT should be calculated.\n * @returns {number} ΔT.\n */\nconst DeltaT = function (datetime) {\n    let y = datetime.year;\n    // Months are zero-indexed\n    y += (datetime.month - 0.5) / 12;\n    let u;\n    let t;\n    switch (true) {\n        case y < -1999 || y > 3000:\n            throw 'DeltaT can only be calculated between 1999 BCE and 3000 CE';\n        case y < -500:\n            u = (y - 1820) / 100;\n            return -20 + 32 * u * u;\n        case y < 500:\n            u = y / 100;\n            return 10583.6 - 1014.41 * u + 33.78311 * u * u - 5.952053 * u * u * u - 0.1798452 * u * u * u * u +\n                0.022174192 * u * u * u * u * u + 0.0090316521 * u * u * u * u * u * u;\n        case y < 1600:\n            u = (y - 1000) / 100;\n            return 1574.2 - 556.01 * u + 71.23472 * u * u + 0.319781 * u * u * u - 0.8503463 * u * u * u * u -\n                0.005050998 * u * u * u * u * u + 0.0083572073 * u * u * u * u * u * u;\n        case y < 1700:\n            t = y - 1600;\n            return 120 - 0.9808 * t - 0.01532 * t * t + t * t * t / 7129;\n        case y < 1800:\n            t = y - 1700;\n            return 8.83 + 0.1603 * t - 0.0059285 * t * t + 0.00013336 * t * t * t - t * t * t * t / 1174000;\n        case y < 1860:\n            t = y - 1800;\n            return 13.72 - 0.332447 * t + 0.0068612 * t * t + 0.0041116 * t * t * t - 0.00037436 * t * t * t * t +\n                0.0000121272 * t * t * t * t * t - 0.0000001699 * t * t * t * t * t * t +\n                0.000000000875 * t * t * t * t * t * t * t;\n        case y < 1900:\n            t = y - 1860;\n            return 7.62 + 0.5737 * t - 0.251754 * t * t + 0.01680668 * t * t * t -\n                0.0004473624 * t * t * t * t + t * t * t * t * t / 233174;\n        case y < 1920:\n            t = y - 1900;\n            return -2.79 + 1.494119 * t - 0.0598939 * t * t + 0.0061966 * t * t * t - 0.000197 * t * t * t * t;\n        case y < 1941:\n            t = y - 1920;\n            return 21.20 + 0.84493 * t - 0.076100 * t * t + 0.0020936 * t * t * t;\n        case y < 1961:\n            t = y - 1950;\n            return 29.07 + 0.407 * t - t * t / 233 + t * t * t / 2547;\n        case y < 1986:\n            t = y - 1975;\n            return 45.45 + 1.067 * t - t * t / 260 - t * t * t / 718;\n        case y < 2005:\n            t = y - 2000;\n            return 63.86 + 0.3345 * t - 0.060374 * t * t + 0.0017275 * t * t * t + 0.000651814 * t * t * t * t +\n                0.00002373599 * t * t * t * t * t;\n        case y < 2050:\n            t = y - 2000;\n            return 62.92 + 0.32217 * t + 0.005589 * t * t;\n        case y < 2150:\n            return -20 + 32 * ((y - 1820) / 100) * ((y - 1820) / 100) -\n                0.5628 * (2150 - y);\n        default:\n            u = (y - 1820) / 100;\n            return -20 + 32 * u * u;\n    }\n};\n/* eslint-enable complexity */\n\n/**\n * Calculates an approximate value for k (the fractional number of new moons\n * since 2000-01-06).\n * @param {DateTime} datetime Datetime for which k is calculated.\n * @returns {number} k.\n */\nconst approxK = function (datetime) {\n    const year = datetime.year + (datetime.month) / 12 +\n        datetime.day / 365.25;\n    return (year - 2000) * 12.3685;\n};\n\n/**\n * Calculates T from k.\n * @param {number} k Fractional number of new moons since 2000-01-06.\n * @returns {number} T Fractional num. of centuries since 2000-01-01:12:00:00Z.\n */\nconst kToT = function (k) {\n    return k / 1236.85;\n};\n\nexport { datetimeToJD, JDToDatetime, JDToT, datetimeToT, DeltaT, approxK, kToT };\n","/**\n * Converts angles in degrees to radians.\n * @param {number} deg Angle in degrees.\n * @returns {number} Angle in radians.\n */\nconst deg2rad = function (deg) {\n    return deg * 0.017453292519943295;\n};\n\n/**\n * Converts angles in radians to degrees.\n * @param {number} rad Angle in radians.\n * @returns {number} Angle in degrees.\n */\nconst rad2deg = function (rad) {\n    return rad * 57.29577951308232;\n};\n\n/**\n * Calculates the sine of an angle given in degrees.\n * @param {number} deg Angle in degrees.\n * @returns {number} Sine of the angle.\n */\nconst sind = function (deg) {\n    return Math.sin(deg2rad(deg));\n};\n\n/**\n * Calculates the cosine of an angle given in degrees.\n * @param {number} deg Angle in degrees.\n * @returns {number} Cosine of the angle.\n */\nconst cosd = function (deg) {\n    return Math.cos(deg2rad(deg));\n};\n\n/**\n * Reduces an angle to the interval 0-360°.\n * @param {number} angle Angle in degrees.\n * @returns {number} Reduced angle in degrees.\n */\nconst reduceAngle = function (angle) {\n    return angle - (360 * Math.floor(angle / 360));\n};\n\n/**\n * Evaluates a polynomial in the form A + Bx + Cx^2...\n * @param {number} variable Value of x in the polynomial.\n * @param {array} coeffs Array of coefficients [A, B, C...].\n * @returns {number} Sum of the polynomial.\n */\nconst polynomial = function (variable, coeffs) {\n    let varPower = 1;\n    let sum = 0.0;\n    const numCoeffs = coeffs.length;\n    for (let i = 0; i < numCoeffs; i++) {\n        sum += varPower * coeffs[i];\n        varPower *= variable;\n    }\n    return sum;\n};\n\n/**\n * Interpolates a value from 3 known values (see AA p24 Eq3.3).\n * @param {number} y1 Start value of the interval.\n * @param {number} y2 Middle value of the interval.\n * @param {number} y3 End value of the interval.\n * @param {number} n Location (-0.5 >= n >= 0.5) of result in the interval.\n * @param {boolean} normalize Whether the final result should be normalized.\n * @returns {number} Interpolated result.\n */\nconst interpolateFromThree = function (y1, y2, y3, n, normalize = false) {\n    let a = y2 - y1;\n    let b = y3 - y2;\n    if (typeof normalize !== 'undefined' && normalize) {\n        if (a < 0) {\n            a += 360;\n        }\n        if (b < 0) {\n            b += 360;\n        }\n    }\n    const c = b - a;\n    return y2 + (n / 2) * (a + b + n * c);\n};\n\nexport { deg2rad, rad2deg, sind, cosd, reduceAngle, polynomial, interpolateFromThree };\n","/** See AA p144 */\nconst sunMeanAnomaly = [357.52772, 35999.050340, -0.0001603, -1 / 300000];\n\n/** See AA p163 Eq 25.2 */\nconst sunMeanLongitude = [280.46646, 36000.76983, 0.0003032];\n\n/** See AA p147 Eq22.3 */\nconst meanObliquityOfEcliptic =\n    [84381.448 / 3600, -4680.93 / 3600, -1.55 / 3600, 1999.25 / 3600, -51.38 / 3600, -249.67 / 3600, -39.05 / 3600,\n        7.12 / 3600, 27.87 / 3600, 5.79 / 3600, 2.45 / 3600];\n\n/** See AA p144 */\nconst moonArgumentOfLatitude =\n    [93.27191, 483202.017538, -0.0036825, 1 / 327270];\n\n/** See AA p144 */\nconst moonAscendingNodeLongitude =\n    [125.04452, -1934.136261, 0.0020708, 1 / 450000];\n\n/** See AA p144 */\nconst moonMeanAnomaly = [134.96298, 477198.867398, 0.0086972, 1 / 56250];\n\n/** See AA p144 */\nconst moonMeanElongation = [297.85036, 445267.111480, -0.0019142, 1 / 189474];\n\n/* eslint-disable no-multi-spaces, array-bracket-spacing */\n/**\n * Nutations in longitude and obliquity\n * See AA p145f\n */\nconst nutations =\n    [\n        [ 0,  0,  0,  0, 1, -171996, -174.2, 92025,  8.9],\n        [-2,  0,  0,  2, 2,  -13187,   -1.6,  5736, -3.1],\n        [ 0,  0,  0,  2, 2,   -2274,   -0.2,   977, -0.5],\n        [ 0,  0,  0,  0, 2,    2062,    0.2,  -895,  0.5],\n        [ 0,  1,  0,  0, 0,    1426,   -3.4,    54, -0.1],\n        [ 0,  0,  1,  0, 0,     712,    0.1,    -7,    0],\n        [-2,  1,  0,  2, 2,    -517,    1.2,   224, -0.6],\n        [ 0,  0,  0,  2, 1,    -386,   -0.4,   200,    0],\n        [ 0,  0,  1,  2, 2,    -301,      0,   129, -0.1],\n        [-2, -1,  0,  2, 2,     217,   -0.5,   -95,  0.3],\n        [-2,  0,  1,  0, 0,    -158,      0,     0,    0],\n        [-2,  0,  0,  2, 1,     129,    0.1,   -70,    0],\n        [ 0,  0, -1,  2, 2,     123,      0,   -53,    0],\n        [ 2,  0,  0,  0, 0,      63,      0,     0,    0],\n        [ 0,  0,  1,  0, 1,      63,    0.1,   -33,    0],\n        [ 2,  0, -1,  2, 2,     -59,      0,    26,    0],\n        [ 0,  0, -1,  0, 1,     -58,   -0.1,    32,    0],\n        [ 0,  0,  1,  2, 1,     -51,      0,    27,    0],\n        [-2,  0,  2,  0, 0,      48,      0,     0,    0],\n        [ 0,  0, -2,  2, 1,      46,      0,   -24,    0],\n        [ 2,  0,  0,  2, 2,     -38,      0,    16,    0],\n        [ 0,  0,  2,  2, 2,     -31,      0,    13,    0],\n        [ 0,  0,  2,  0, 0,      29,      0,     0,    0],\n        [-2,  0,  1,  2, 2,      29,      0,   -12,    0],\n        [ 0,  0,  0,  2, 0,      26,      0,     0,    0],\n        [-2,  0,  0,  2, 0,     -22,      0,     0,    0],\n        [ 0,  0, -1,  2, 1,      21,      0,   -10,    0],\n        [ 0,  2,  0,  0, 0,      17,   -0.1,     0,    0],\n        [ 2,  0, -1,  0, 1,      16,      0,    -8,    0],\n        [-2,  2,  0,  2, 2,     -16,    0.1,     7,    0],\n        [ 0,  1,  0,  0, 1,     -15,      0,     9,    0],\n        [-2,  0,  1,  0, 1,     -13,      0,     7,    0],\n        [ 0, -1,  0,  0, 1,     -12,      0,     6,    0],\n        [ 0,  0,  2, -2, 0,      11,      0,     0,    0],\n        [ 2,  0, -1,  2, 1,     -10,      0,     5,    0],\n        [ 2,  0,  1,  2, 2,     -8,       0,     3,    0],\n        [ 0,  1,  0,  2, 2,      7,       0,    -3,    0],\n        [-2,  1,  1,  0, 0,     -7,       0,     0,    0],\n        [ 0, -1,  0,  2, 2,     -7,       0,     3,    0],\n        [ 2,  0,  0,  2, 1,     -7,       0,     3,    0],\n        [ 2,  0,  1,  0, 0,      6,       0,     0,    0],\n        [-2,  0,  2,  2, 2,      6,       0,    -3,    0],\n        [-2,  0,  1,  2, 1,      6,       0,    -3,    0],\n        [ 2,  0, -2,  0, 1,     -6,       0,     3,    0],\n        [ 2,  0,  0,  0, 1,     -6,       0,     3,    0],\n        [ 0, -1,  1,  0, 0,      5,       0,     0,    0],\n        [-2, -1,  0,  2, 1,     -5,       0,     3,    0],\n        [-2,  0,  0,  0, 1,     -5,       0,     3,    0],\n        [ 0,  0,  2,  2, 1,     -5,       0,     3,    0],\n        [-2,  0,  2,  0, 1,      4,       0,     0,    0],\n        [-2,  1,  0,  2, 1,      4,       0,     0,    0],\n        [ 0,  0,  1, -2, 0,      4,       0,     0,    0],\n        [-1,  0,  1,  0, 0,     -4,       0,     0,    0],\n        [-2,  1,  0,  0, 0,     -4,       0,     0,    0],\n        [ 1,  0,  0,  0, 0,     -4,       0,     0,    0],\n        [ 0,  0,  1,  2, 0,      3,       0,     0,    0],\n        [ 0,  0, -2,  2, 2,     -3,       0,     0,    0],\n        [-1, -1,  1,  0, 0,     -3,       0,     0,    0],\n        [ 0,  1,  1,  0, 0,     -3,       0,     0,    0],\n        [ 0, -1,  1,  2, 2,     -3,       0,     0,    0],\n        [ 2, -1, -1,  2, 2,     -3,       0,     0,    0],\n        [ 0,  0,  3,  2, 2,      3,       0,     0,    0],\n        [ 2, -1,  0,  2, 2,     -3,       0,     0,    0],\n    ];\n/* eslint-enable no-multi-spaces, array-bracket-spacing */\n\nexport { sunMeanAnomaly, sunMeanLongitude, meanObliquityOfEcliptic, moonArgumentOfLatitude, moonAscendingNodeLongitude,\n    moonMeanAnomaly, moonMeanElongation, nutations };\n","import * as auxMath from './auxMath.js';\nimport * as constants from './constants.js';\nimport * as timeConversions from './timeConversions.js';\nimport { returnTimeForNoEventCase, roundToNearestMinute } from './index.js';\n\n/**\n * Calculates the solar transit time on a date at a given longitude (see AA\n * p102f).\n * @param {DateTime} datetime Date for which transit is calculated.\n * @param {number} L Longitude.\n * @returns {DateTime} Solar transit time.\n */\nconst sunTransit = function (datetime, L) {\n    const timezone = datetime.zone;\n    let transit = datetime.set({ hour: 0, minute: 0, second: 0 }).setZone('UTC', { keepLocalTime: true });\n    const DeltaT = timeConversions.DeltaT(transit);\n    const T = timeConversions.datetimeToT(transit);\n    const Theta0 = apparentSiderealTimeGreenwich(T);\n    // Want 0h TD for this, not UT\n    const TD = T - (DeltaT / (3600 * 24 * 36525));\n    const alpha = sunApparentRightAscension(TD);\n    // Sign flip for longitude from AA as we take East as positive\n    let m = (alpha - L - Theta0) / 360;\n    m = normalizeM(m, datetime.offset);\n    const DeltaM = sunTransitCorrection(T, Theta0, DeltaT, L, m);\n    m += DeltaM;\n    transit = transit.plus({ seconds: Math.floor(m * 3600 * 24 + 0.5) });\n    if (roundToNearestMinute) {\n        transit = transit.plus({ seconds: 30 }).set({ second: 0 });\n    }\n    return transit.setZone(timezone);\n};\n\n/**\n * Calculates the sunrise or sunset time on a date at a given latitude and\n * longitude (see AA p102f).\n * @param {DateTime} datetime Date for which sunrise or sunset is calculated.\n * @param {number} phi Latitude.\n * @param {number} L Longitude.\n * @param {string} flag 'RISE' or 'SET' depending on which event should be\n *     calculated.\n * @param {number} offset number of degrees below the horizon for the desired\n *     event (50/60 for sunrise/set, 6 for civil, 12 for nautical, 18 for\n *     astronomical dawn/dusk.\n * @returns {DateTime} Sunrise or sunset time.\n */\n// eslint-disable-next-line complexity,require-jsdoc\nconst sunRiseSet = function (datetime, phi, L, flag, offset = 50 / 60) {\n    const timezone = datetime.zone;\n    let suntime = datetime.set({ hour: 0, minute: 0, second: 0 }).setZone('UTC', { keepLocalTime: true });\n    const DeltaT = timeConversions.DeltaT(suntime);\n    const T = timeConversions.datetimeToT(suntime);\n    const Theta0 = apparentSiderealTimeGreenwich(T);\n    // Want 0h TD for this, not UT\n    const TD = T - (DeltaT / (3600 * 24 * 36525));\n    const alpha = sunApparentRightAscension(TD);\n    const delta = sunApparentDeclination(TD);\n    const H0 = approxLocalHourAngle(phi, delta, offset);\n    // Sign flip for longitude from AA as we take East as positive\n    let m0 = (alpha - L - Theta0) / 360;\n    m0 = normalizeM(m0, datetime.offset);\n    let m;\n    if (flag === 'RISE') {\n        m = m0 - H0 / 360;\n    } else if (flag === 'SET') {\n        m = m0 + H0 / 360;\n    } else {\n        return false;\n    }\n    let counter = 0;\n    let DeltaM = 1;\n    // Repeat if correction is larger than ~9s\n    while ((Math.abs(DeltaM) > 0.0001) && (counter < 3)) {\n        DeltaM = sunRiseSetCorrection(T, Theta0, DeltaT, phi, L, m, offset);\n        m += DeltaM;\n        counter++;\n    }\n    if (m > 0) {\n        suntime = suntime.plus({ seconds: Math.floor(m * 3600 * 24 + 0.5) });\n    } else {\n        suntime = suntime.minus({ seconds: Math.floor(m * 3600 * 24 + 0.5) });\n    }\n    if (roundToNearestMinute) {\n        suntime = suntime.plus({ seconds: 30 }).set({ second: 0 });\n    }\n    return suntime.setZone(timezone);\n};\n\n/**\n * Returns a fixed time as given by the hour parameter, an hour later during DST) if the\n * specified event does not occur on the date and returnTimeForNoEventCase is true. If\n * false, return whether the reason for no event is the sun being too high ('SUN_HIGH')\n * or too low ('SUN_LOW').\n * @param {DateTime} date The original date from which the event was calculated.\n * @param {string|undefined} errorCode The error code in case no event was found\n * @param {int} hour Hour to which the returned datetime should be set.\n * @param {int} minute Minute to which the returned datetime should be set.\n * @returns {(DateTime|string)} Time given by parameter 'hour' (+ correction for\n *     DST if applicable) or a string indicating why there was no event ('SUN_HIGH'\n *     or 'SUN_LOW')\n */\nconst handleNoEventCase = function (date, errorCode, hour, minute = 0) {\n    if (returnTimeForNoEventCase) {\n        const returnDate = date.set({ hour, minute, second: 0 }).plus({ minutes: date.isInDST ? 60 : 0 });\n        if (errorCode) {\n            returnDate.errorCode = errorCode;\n        }\n        return returnDate;\n    }\n    return errorCode;\n};\n\n/**\n * Calculates the approximate local hour angle of the sun at sunrise or sunset.\n * @param {number} phi Latitude (see AA p102 Eq15.1).\n * @param {number} delta Apparent declination of the sun.\n * @param {number} offset number of degrees below the horizon for the desired\n *     event (50/60 for sunrise/set, 6 for civil, 12 for nautical, 18 for\n *     astronomical dawn/dusk.\n * @returns {number} Approximate local hour angle.\n */\nconst approxLocalHourAngle = function (phi, delta, offset) {\n    const cosH0 = (auxMath.sind(-offset) -\n        auxMath.sind(phi) * auxMath.sind(delta)) /\n        (auxMath.cosd(phi) * auxMath.cosd(delta));\n    if (cosH0 < -1) {\n        throw noEventCodes.SUN_HIGH;\n    } else if (cosH0 > 1) {\n        throw noEventCodes.SUN_LOW;\n    }\n    return auxMath.rad2deg(Math.acos(cosH0));\n};\n\n/**\n * Normalizes a fractional time of day to be on the correct date.\n * @param {number} m Fractional time of day\n * @param {int} utcOffset Offset in minutes from UTC.\n * @returns {number} m Normalized m.\n */\nconst normalizeM = function (m, utcOffset) {\n    const localM = m + utcOffset / 1440;\n    if (localM < 0) {\n        return m + 1;\n    } else if (localM > 1) {\n        return m - 1;\n    }\n    return m;\n};\n\n/**\n * Calculates the correction for the solar transit time (see AA p103).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} Theta0 Apparent sidereal time at Greenwich.\n * @param {number} DeltaT ΔT = TT − UT.\n * @param {number} L Longitude.\n * @param {number} m Fractional time of day of the event.\n * @returns {number} Currection for the solar transit time.\n */\nconst sunTransitCorrection = function (T, Theta0, DeltaT, L, m) {\n    const theta0 = Theta0 + 360.985647 * m;\n    const n = m + DeltaT / 864000;\n    const alpha = interpolatedRa(T, n);\n    const H = localHourAngle(theta0, L, alpha);\n    return -H / 360;\n};\n\n/**\n * Calculates the correction for the sunrise/sunset time (see AA p103).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} Theta0 Apparent sidereal time at Greenwich.\n * @param {number} DeltaT ΔT = TT − UT.\n * @param {number} phi Latitude.\n * @param {number} L Longitude.\n * @param {number} m Fractional time of day of the event.\n * @param {number} offset number of degrees below the horizon for the desired\n *     event (50/60 for sunrise/set, 6 for civil, 12 for nautical, 18 for\n *     astronomical dawn/dusk.\n * @returns {number} Currection for the sunrise/sunset time.\n */\nconst sunRiseSetCorrection = function (T, Theta0, DeltaT, phi, L, m, offset) {\n    const theta0 = Theta0 + 360.985647 * m;\n    const n = m + DeltaT / 864000;\n    const alpha = interpolatedRa(T, n);\n    const delta = interpolatedDec(T, n);\n    const H = localHourAngle(theta0, L, alpha);\n    const h = altitude(phi, delta, H);\n    return (h + offset) / (360 * auxMath.cosd(delta) * auxMath.cosd(phi) * auxMath.sind(H));\n};\n\n/**\n * Calculates the local hour angle of the sun (see AA p103).\n * @param {number} theta0 Sidereal time at Greenwich in degrees.\n * @param {number} L Longitude.\n * @param {number} alpha Apparent right ascension of the sun.\n * @returns {number} Local hour angle of the sun.\n */\nconst localHourAngle = function (theta0, L, alpha) {\n    // Signflip for longitude\n    let H = auxMath.reduceAngle(theta0 + L - alpha);\n    if (H > 180) {\n        H -= 360;\n    }\n    return H;\n};\n\n/**\n * Calculates the altitude of the sun above the horizon (see AA P93 Eq13.6).\n * @param {number} phi Latitude.\n * @param {number} delta Apparent declination of the sun.\n * @param {number} H Local hour angle of the sun.\n * @returns {number} Altitude of the sun above the horizon.\n */\nconst altitude = function (phi, delta, H) {\n    return auxMath.rad2deg(Math.asin(\n        auxMath.sind(phi) * auxMath.sind(delta) + auxMath.cosd(phi) * auxMath.cosd(delta) * auxMath.cosd(H)));\n};\n\n/**\n * Interpolates the sun's right ascension (see AA p103).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} n Fractional time of day of the event corrected by ΔT.\n * @returns {number} Interpolated right ascension.\n */\nconst interpolatedRa = function (T, n) {\n    const alpha1 = sunApparentRightAscension(T - (1 / 36525));\n    const alpha2 = sunApparentRightAscension(T);\n    const alpha3 = sunApparentRightAscension(T + (1 / 36525));\n    // I don't understand why the RA has to be interpolated with normalization\n    // but the Dec without, but the returned values are wrong otherwise...\n    const alpha = auxMath.interpolateFromThree(alpha1, alpha2, alpha3, n, true);\n    return auxMath.reduceAngle(alpha);\n};\n\n/**\n * Interpolates the sun's declination (see AA p103).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} n Fractional time of day of the event corrected by ΔT.\n * @returns {number} Interpolated declination.\n */\nconst interpolatedDec = function (T, n) {\n    const delta1 = sunApparentDeclination(T - (1 / 36525));\n    const delta2 = sunApparentDeclination(T);\n    const delta3 = sunApparentDeclination(T + (1 / 36525));\n    const delta = auxMath.interpolateFromThree(delta1, delta2, delta3, n);\n    return auxMath.reduceAngle(delta);\n};\n\n/**\n * Calculates the apparent right ascension of the sun (see AA p165 Eq25.6).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Apparent right ascension of the sun.\n */\nconst sunApparentRightAscension = function (T) {\n    const Omega = moonAscendingNodeLongitude(T);\n    const epsilon = trueObliquityOfEcliptic(T) + 0.00256 * auxMath.cosd(Omega);\n    const lambda = sunApparentLongitude(T);\n    const alpha = auxMath.rad2deg(Math.atan2(auxMath.cosd(epsilon) * auxMath.sind(lambda), auxMath.cosd(lambda)));\n    return auxMath.reduceAngle(alpha);\n};\n\n/**\n * Calculates the apparent declination of the sun (see AA p165 Eq25.7).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Apparent declination of the sun.\n */\nconst sunApparentDeclination = function (T) {\n    const Omega = moonAscendingNodeLongitude(T);\n    const epsilon = trueObliquityOfEcliptic(T) + 0.00256 * auxMath.cosd(Omega);\n    const lambda = sunApparentLongitude(T);\n    return auxMath.rad2deg(Math.asin(auxMath.sind(epsilon) * auxMath.sind(lambda)));\n};\n\n/**\n * Calculates the apparent sidereal time at Greenwich (see AA p88).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Apparent sidereal time at Greenwich\n */\nconst apparentSiderealTimeGreenwich = function (T) {\n    const theta0 = meanSiderealTimeGreenwich(T);\n    const epsilon = trueObliquityOfEcliptic(T);\n    const DeltaPsi = nutationInLongitude(T);\n    const theta = theta0 + DeltaPsi * auxMath.cosd(epsilon);\n    return auxMath.reduceAngle(theta);\n};\n\n/**\n * Calculates the mean sidereal time at Greenwich (see AA p88 Eq12.4).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Mean sidereal time at Greenwich\n */\nconst meanSiderealTimeGreenwich = function (T) {\n    const JD2000 = T * 36525;\n    return 280.46061837 + 360.98564736629 * JD2000 + 0.000387933 * T * T - T * T * T / 38710000;\n};\n\n/**\n * Calculates the true obliquity of the ecliptic (see AA p147).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} True obliquity of the ecliptic.\n */\nconst trueObliquityOfEcliptic = function (T) {\n    const epsilon0 = meanObliquityOfEcliptic(T);\n    const DeltaEpsilon = nutationInObliquity(T);\n    return epsilon0 + DeltaEpsilon;\n};\n\n/**\n * Calculates the mean obliquity of the ecliptic (see AA p147 Eq 22.3).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Mean obliquity of the ecliptic.\n */\nconst meanObliquityOfEcliptic = function (T) {\n    const U = T / 100;\n    return auxMath.polynomial(U, constants.meanObliquityOfEcliptic);\n};\n\n/**\n * Calculates the apparent longitude of the sun (see AA p164).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Apparent longitude of the sun.\n */\nconst sunApparentLongitude = function (T) {\n    const Sol = sunTrueLongitude(T);\n    const Omega = moonAscendingNodeLongitude(T);\n    return Sol - 0.00569 - 0.00478 * auxMath.sind(Omega);\n};\n\n/**\n * Calculates the true longitude of the sun (see AA p164).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} True longitude of the sun.\n */\nconst sunTrueLongitude = function (T) {\n    const L0 = sunMeanLongitude(T);\n    const C = sunEquationOfCenter(T);\n    return L0 + C;\n};\n\n/**\n * Calculates the equation of center of the sun (see AA p164).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Equation of center of the sun.\n */\nconst sunEquationOfCenter = function (T) {\n    const M = sunMeanAnomaly(T);\n    return (1.914602 - 0.004817 * T - 0.000014 * T * T) * auxMath.sind(M) +\n        (0.019993 - 0.000101 * T) * auxMath.sind(2 * M) + 0.000290 * auxMath.sind(3 * M);\n};\n\n/**\n * Calculates the nutation in longitude of the sun (see AA p144ff).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Nutation in longitude of the sun.\n */\nconst nutationInLongitude = function (T) {\n    const D = moonMeanElongation(T);\n    const M = sunMeanAnomaly(T);\n    const MPrime = moonMeanAnomaly(T);\n    const F = moonArgumentOfLatitude(T);\n    const Omega = moonAscendingNodeLongitude(T);\n    let DeltaPsi = 0;\n    let sineArg;\n    for (let i = 0; i < 63; i++) {\n        sineArg = constants.nutations[i][0] * D + constants.nutations[i][1] * M + constants.nutations[i][2] * MPrime +\n            constants.nutations[i][3] * F + constants.nutations[i][4] * Omega;\n        DeltaPsi += (constants.nutations[i][5] + constants.nutations[i][6] * T) * auxMath.sind(sineArg);\n    }\n    return DeltaPsi / 36000000;\n};\n\n/**\n * Calculates the nutation in obliquity of the sun (see AA p144ff).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Nutation in obliquity of the sun.\n */\nconst nutationInObliquity = function (T) {\n    const D = moonMeanElongation(T);\n    const M = sunMeanAnomaly(T);\n    const MPrime = moonMeanAnomaly(T);\n    const F = moonArgumentOfLatitude(T);\n    const Omega = moonAscendingNodeLongitude(T);\n    let DeltaEpsilon = 0;\n    let cosArg;\n    for (let i = 0; i < 63; i++) {\n        cosArg = constants.nutations[i][0] * D + constants.nutations[i][1] * M + constants.nutations[i][2] * MPrime +\n            constants.nutations[i][3] * F + constants.nutations[i][4] * Omega;\n        DeltaEpsilon += (constants.nutations[i][7] + constants.nutations[i][8] * T) * auxMath.cosd(cosArg);\n    }\n    return DeltaEpsilon / 36000000;\n};\n\n/**\n * Calculates the argument of latitude of the moon (see AA p144).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Argument of latitude of the moon.\n */\nconst moonArgumentOfLatitude = function (T) {\n    const F = auxMath.polynomial(T, constants.moonArgumentOfLatitude);\n    return auxMath.reduceAngle(F);\n};\n\n/**\n * Calculates the longitude of the ascending node of the Moon's mean orbit on\n * the ecliptic, measured from the mean equinox of the datea (see AA p144).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Longitude of the asc. node of the moon's mean orbit.\n */\nconst moonAscendingNodeLongitude = function (T) {\n    const Omega = auxMath.polynomial(T, constants.moonAscendingNodeLongitude);\n    return auxMath.reduceAngle(Omega);\n};\n\n/**\n * Calculates the mean anomaly of the moon (see AA p144).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Mean anomaly of the moon.\n */\nconst moonMeanAnomaly = function (T) {\n    const MPrime = auxMath.polynomial(T, constants.moonMeanAnomaly);\n    return auxMath.reduceAngle(MPrime);\n};\n\n/**\n * Calculates the mean elongation of the moon from the sun (see AA p144).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Mean elongation of the moon from the sun.\n */\nconst moonMeanElongation = function (T) {\n    const D = auxMath.polynomial(T, constants.moonMeanElongation);\n    return auxMath.reduceAngle(D);\n};\n\n/**\n * Calculates the mean anomaly of the sun (see AA p144).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Mean anomaly of the sun.\n */\nconst sunMeanAnomaly = function (T) {\n    const M = auxMath.polynomial(T, constants.sunMeanAnomaly);\n    return auxMath.reduceAngle(M);\n};\n\n/**\n * Calculates the mean longitude of the sun referred to the mean equinox of the\n * date (see AA p163).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Mean longitude of the sun referred to the mean equinox of\n *     the date.\n */\nconst sunMeanLongitude = function (T) {\n    const L0 = auxMath.polynomial(T, constants.sunMeanLongitude);\n    return auxMath.reduceAngle(L0);\n};\n\nconst noEventCodes = {\n    MIDNIGHT_SUN: 'MIDNIGHT_SUN',\n    NO_ASTRONOMICAL_DAWN: 'NO_ASTRONOMICAL_DAWN',\n    NO_ASTRONOMICAL_DUSK: 'NO_ASTRONOMICAL_DUSK',\n    NO_CIVIL_DAWN: 'NO_CIVIL_DAWN',\n    NO_CIVIL_DUSK: 'NO_CIVIL_DUSK',\n    NO_NAUTICAL_DAWN: 'NO_NAUTICAL_DAWN',\n    NO_NAUTICAL_DUSK: 'NO_NAUTICAL_DUSK',\n    POLAR_NIGHT: 'POLAR_NIGHT',\n    SUN_HIGH: 'SUN_HIGH',\n    SUN_LOW: 'SUN_LOW',\n};\n\nexport { sunRiseSet, sunTransit, handleNoEventCase };\n","import * as auxMath from './auxMath.js';\nimport * as timeConversions from './timeConversions.js';\n\n/**\n * Calculates the Julian date in ephemeris time of the moon near the date\n * corresponding to k (see AA p350ff).\n * @param {number} k The approximate fractional number of new moons since\n *     2000-01-06.\n * @param {int} phase 0 -> new moon, 1 -> first quarter,\n *                    2 -> full moon, 3 -> last quarter.\n * @returns {number} Julian date in ephemeris time of the moon of given phase.\n */\nconst truePhase = function (k, phase) {\n    k += phase / 4;\n    const T = timeConversions.kToT(k);\n    const E = eccentricityCorrection(T);\n    const JDE = meanPhase(T, k);\n    const M = sunMeanAnomaly(T, k);\n    const MPrime = moonMeanAnomaly(T, k);\n    const F = moonArgumentOfLatitude(T, k);\n    const Omega = moonAscendingNodeLongitude(T, k);\n    const A = planetaryArguments(T, k);\n    let DeltaJDE = 0;\n    if (phase === 0 || phase === 2) {\n        DeltaJDE += newMoonFullMoonCorrections(E, M, MPrime, F, Omega, phase);\n    } else if (phase === 1 || phase === 3) {\n        DeltaJDE += quarterCorrections(E, M, MPrime, F, Omega, phase);\n    }\n    DeltaJDE += commonCorrections(A);\n    return JDE + DeltaJDE;\n};\n\n/**\n * Calculates the mean phase of the moon as Julian date in ephemeris time (see\n * AA p349 Eq49.1).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} k The approximate fractional number of new moons since\n *     2000-01-06.\n * @returns {number} Julian date in ephemeris time of the moon of given mean\n *     phase.\n */\nconst meanPhase = function (T, k) {\n    return 2451550.09766 + 29.530588861 * k + 0.00015437 * T * T - 0.000000150 * T * T * T +\n        0.00000000073 * T * T * T * T;\n};\n\n/**\n * Calculates the mean anomaly of the sun (see AA p350 Eq49.4).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} k The approximate fractional number of new moons since\n *     2000-01-06.\n * @returns {number} Mean anomaly of the sun at the given time.\n */\nconst sunMeanAnomaly = function (T, k) {\n    return 2.5534 + 29.10535670 * k - 0.0000014 * T * T - 0.00000011 * T * T * T;\n};\n\n/**\n * Calculates the mean anomaly of the moon (see AA p350 Eq49.5).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} k The approximate fractional number of new moons since\n *     2000-01-06.\n * @returns {number} Mean anomaly of the moon at the given time.\n */\nconst moonMeanAnomaly = function (T, k) {\n    return 201.5643 + 385.81693528 * k + 0.0107582 * T * T + 0.00001238 * T * T * T - 0.000000058 * T * T * T * T;\n};\n\n/**\n * Calculates the argument of latitude of the moon (see AA p350 Eq49.6).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} k The approximate fractional number of new moons since\n *     2000-01-06.\n * @returns {number} Argument of latitude of the moon at the given time.\n */\nconst moonArgumentOfLatitude = function (T, k) {\n    return 160.7108 + 390.67050284 * k - 0.0016118 * T * T - 0.00000227 * T * T * T + 0.000000011 * T * T * T * T;\n};\n\n/**\n * Calculates the longitude of the ascending node of the lunar orbit (see AA\n * p350 Eq49.7).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} k The approximate fractional number of new moons since\n *     2000-01-06.\n * @returns {number} Longitude of the ascending node of the lunar orbit at the\n *     given time.\n */\nconst moonAscendingNodeLongitude = function (T, k) {\n    return 124.7746 - 1.56375588 * k + 0.0020672 * T * T + 0.00000215 * T * T * T;\n};\n\n/**\n * Calculates the correction for the eccentricity of the earth's orbit.\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @returns {number} Eccentricity correction.\n */\nconst eccentricityCorrection = function (T) {\n    return 1 - 0.002516 * T - 0.0000074 * T * T;\n};\n\n/**\n * Calculates the planetary arguments for the moon phases (see AA p351).\n * @param {number} T Fractional number of Julian centuries since\n *     2000-01-01T12:00:00Z.\n * @param {number} k The approximate fractional number of new moons since\n *     2000-01-06.\n * @returns {array} Planetary arguments for the moon phases.\n */\nconst planetaryArguments = function (T, k) {\n    // Want to follow the numbering conventions from AA\n    return [\n        0,\n        299.77 + 0.107408 * k - 0.009173 * T * T,\n        251.88 + 0.016321 * k,\n        251.83 + 26.651886 * k,\n        349.42 + 36.412478 * k,\n        84.66 + 18.206239 * k,\n        141.74 + 53.303771 * k,\n        207.14 + 2.453732 * k,\n        154.84 + 7.306860 * k,\n        34.52 + 27.261239 * k,\n        207.19 + 0.121824 * k,\n        291.34 + 1.844379 * k,\n        161.72 + 24.198154 * k,\n        239.56 + 25.513099 * k,\n        331.55 + 3.592518 * k,\n    ];\n};\n\n/**\n * Calculates the corrections to the planetary arguments for the moon phases\n * that are common to all phases (see AA p352).\n * @param {array} A Array of planetary arguments\n * @returns {number} Correction to the Julian date in ephemeris time for the\n *     moon phase.\n */\nconst commonCorrections = function (A) {\n    return 0.000325 * auxMath.sind(A[1]) +\n        0.000165 * auxMath.sind(A[2]) +\n        0.000164 * auxMath.sind(A[3]) +\n        0.000126 * auxMath.sind(A[4]) +\n        0.000110 * auxMath.sind(A[5]) +\n        0.000062 * auxMath.sind(A[6]) +\n        0.000060 * auxMath.sind(A[7]) +\n        0.000056 * auxMath.sind(A[8]) +\n        0.000047 * auxMath.sind(A[9]) +\n        0.000042 * auxMath.sind(A[10]) +\n        0.000040 * auxMath.sind(A[11]) +\n        0.000037 * auxMath.sind(A[12]) +\n        0.000035 * auxMath.sind(A[13]) +\n        0.000023 * auxMath.sind(A[14]);\n};\n\n/**\n * Calculates the corrections to the planetary arguments for the moon phases\n * for full and new moons (see AA p351).\n * @param {number} E Correction for the eccentricity of the earth's orbit.\n * @param {number} M Mean anomaly of the sun.\n * @param {number} MPrime Mean anomaly of the moon.\n * @param {number} F Argument of latitude of the moon.\n * @param {number} Omega Longitude of the ascending node of the lunar orbit.\n * @param {int} phase 0 -> new moon, 1 -> first quarter,\n *                    2 -> full moon, 3 -> last quarter.\n * @returns {number} Correction to the Julian date in ephemeris time for the\n *     moon phase.\n */\nconst newMoonFullMoonCorrections = function (E, M, MPrime, F, Omega, phase) {\n    let DeltaJDE =\n        -0.00111 * auxMath.sind(MPrime - 2 * F) -\n        0.00057 * auxMath.sind(MPrime + 2 * F) +\n        0.00056 * E * auxMath.sind(2 * MPrime + M) -\n        0.00042 * auxMath.sind(3 * MPrime) +\n        0.00042 * E * auxMath.sind(M + 2 * F) +\n        0.00038 * E * auxMath.sind(M - 2 * F) -\n        0.00024 * E * auxMath.sind(2 * MPrime - M) -\n        0.00017 * auxMath.sind(Omega) -\n        0.00007 * auxMath.sind(MPrime + 2 * M) +\n        0.00004 * auxMath.sind(2 * MPrime - 2 * F) +\n        0.00004 * auxMath.sind(3 * M) +\n        0.00003 * auxMath.sind(MPrime + M - 2 * F) +\n        0.00003 * auxMath.sind(2 * MPrime + 2 * F) -\n        0.00003 * auxMath.sind(MPrime + M + 2 * F) +\n        0.00003 * auxMath.sind(MPrime - M + 2 * F) -\n        0.00002 * auxMath.sind(MPrime - M - 2 * F) -\n        0.00002 * auxMath.sind(3 * MPrime + M) +\n        0.00002 * auxMath.sind(4 * MPrime);\n    if (phase === 0) {\n        DeltaJDE +=\n            -0.40720 * auxMath.sind(MPrime) +\n            0.17241 * E * auxMath.sind(M) +\n            0.01608 * auxMath.sind(2 * MPrime) +\n            0.01039 * auxMath.sind(2 * F) +\n            0.00739 * E * auxMath.sind(MPrime - M) -\n            0.00514 * E * auxMath.sind(MPrime + M) +\n            0.00208 * E * E * auxMath.sind(2 * M);\n    } else if (phase === 2) {\n        DeltaJDE +=\n            -0.40614 * auxMath.sind(MPrime) +\n            0.17302 * E * auxMath.sind(M) +\n            0.01614 * auxMath.sind(2 * MPrime) +\n            0.01043 * auxMath.sind(2 * F) +\n            0.00734 * E * auxMath.sind(MPrime - M) -\n            0.00515 * E * auxMath.sind(MPrime + M) +\n            0.00209 * E * E * auxMath.sind(2 * M);\n    }\n    return DeltaJDE;\n};\n\n/**\n * Calculates the corrections to the planetary arguments for the moon phases\n * for first and last quarters (see AA p352).\n * @param {number} E Correction for the eccentricity of the earth's orbit.\n * @param {number} M Mean anomaly of the sun.\n * @param {number} MPrime Mean anomaly of the moon.\n * @param {number} F Argument of latitude of the moon.\n * @param {number} Omega Longitude of the ascending node of the lunar orbit.\n * @param {int} phase 0 -> new moon, 1 -> first quarter,\n *                    2 -> full moon, 3 -> last quarter.\n * @returns {number} Correction to the Julian date in ephemeris time for the\n *     moon phase.\n */\nconst quarterCorrections = function (E, M, MPrime, F, Omega, phase) {\n    let DeltaJDE =\n        -0.62801 * auxMath.sind(MPrime) +\n        0.17172 * E * auxMath.sind(M) -\n        0.01183 * E * auxMath.sind(MPrime + M) +\n        0.00862 * auxMath.sind(2 * MPrime) +\n        0.00804 * auxMath.sind(2 * F) +\n        0.00454 * E * auxMath.sind(MPrime - M) +\n        0.00204 * E * E * auxMath.sind(2 * M) -\n        0.00180 * auxMath.sind(MPrime - 2 * F) -\n        0.00070 * auxMath.sind(MPrime + 2 * F) -\n        0.00040 * auxMath.sind(3 * MPrime) -\n        0.00034 * E * auxMath.sind(2 * MPrime - M) +\n        0.00032 * E * auxMath.sind(M + 2 * F) +\n        0.00032 * E * auxMath.sind(M - 2 * F) -\n        0.00028 * E * E * auxMath.sind(MPrime + 2 * M) +\n        0.00027 * E * auxMath.sind(2 * MPrime + M) -\n        0.00017 * auxMath.sind(Omega) -\n        0.00005 * auxMath.sind(MPrime - M - 2 * F) +\n        0.00004 * auxMath.sind(2 * MPrime + 2 * F) -\n        0.00004 * auxMath.sind(MPrime + M + 2 * F) +\n        0.00004 * auxMath.sind(MPrime - 2 * M) +\n        0.00003 * auxMath.sind(MPrime + M - 2 * F) +\n        0.00003 * auxMath.sind(3 * M) +\n        0.00002 * auxMath.sind(2 * MPrime - 2 * F) +\n        0.00002 * auxMath.sind(MPrime - M + 2 * F) -\n        0.00002 * auxMath.sind(3 * MPrime + M);\n    const W =\n        0.00306 -\n        0.00038 * E * auxMath.cosd(M) +\n        0.00026 * auxMath.cosd(MPrime) -\n        0.00002 * auxMath.cosd(MPrime - M) +\n        0.00002 * auxMath.cosd(MPrime + M) +\n        0.00002 * auxMath.cosd(2 * F);\n    if (phase === 1) {\n        DeltaJDE += W;\n    } else if (phase === 3) {\n        DeltaJDE -= W;\n    }\n    return DeltaJDE;\n};\n\nexport { truePhase };\n","import * as luxon from 'luxon';\nimport { DeltaT, JDToDatetime, approxK } from './timeConversions';\nimport { handleNoEventCase, sunRiseSet, sunTransit } from './sunTimes';\nimport { truePhase } from './moonPhases';\n\nlet roundToNearestMinute = false;\nlet returnTimeForNoEventCase = false;\nlet dateFormatKeys = {\n    SUN_HIGH: '‡',\n    SUN_LOW: '†',\n};\n\n/**\n * Sets options (roundToNearestMinute, returnTimeForNoEventCase, dateFormatKey) for the\n * module.\n * @param {object} options Options to be set.\n */\nconst options = function (options) {\n    if (typeof options.roundToNearestMinute === 'boolean') {\n        roundToNearestMinute = options.roundToNearestMinute;\n    }\n    if (typeof options.returnTimeForNoEventCase === 'boolean') {\n        returnTimeForNoEventCase = options.returnTimeForNoEventCase;\n    }\n    if (typeof options.dateFormatKeys === 'object') {\n        dateFormatKeys = options.dateFormatKeys;\n    }\n};\n\n/**\n * Uses the extra information encoded into the DateTime object for dates without\n * a sun event if returnTimeForNoEventCase is true to mark the output string.\n * @param {DateTime} datetime Input datetime.\n * @param {string} formatString Valid DateTime format string.\n * @returns {string} Formatted string with marker appended.\n */\nconst formatCI = function (datetime, formatString) {\n    const noEventCode = datetime.errorCode;\n    let datestring = datetime.toFormat(formatString);\n    if (dateFormatKeys[noEventCode]) {\n        datestring += dateFormatKeys[noEventCode];\n    }\n    return datestring;\n};\n\n/**\n * Calculates sunrise on the provided date.\n * @param {DateTime} datetime Datetime for which sunrise is calculated. Should\n *     always contain a timezone or be in UTC, lone UTC offsets might lead to\n *     unexpected behaviour.\n * @param {number} phi Latitude of target location.\n * @param {number} L longitude of target location.\n * @returns {(DateTime|string)} Time of sunrise or a string indicating that no\n *     event could be calculated as the sun was too high ('SUN_HIGH') or too low\n *     ('SUN_LOW') during the entire day (unless returnTimeForNoEventCase is true).\n */\nconst sunrise = function (datetime, phi, L) {\n    try {\n        return sunRiseSet(datetime, phi, L, 'RISE');\n    } catch (err) {\n        return handleNoEventCase(datetime, err, 6);\n    }\n};\n\n/**\n * Calculates sunset on the provided date.\n * @param {DateTime} datetime Datetime for which sunset is calculated. Should\n *     always contain a timezone or be in UTC, lone UTC offsets might lead to\n *     unexpected behaviour.\n * @param {number} phi Latitude of target location.\n * @param {number} L longitude of target location.\n * @returns {(DateTime|string)} Time of sunset or a string indicating that no\n *     event could be calculated as the sun was too high ('SUN_HIGH') or too low\n *     ('SUN_LOW') during the entire day (unless returnTimeForNoEventCase is true).\n */\nconst sunset = function (datetime, phi, L) {\n    try {\n        return sunRiseSet(datetime, phi, L, 'SET');\n    } catch (err) {\n        return handleNoEventCase(datetime, err, 18);\n    }\n};\n\n/**\n * Calculates civil dawn (sun 6° below horizon) on the provided date.\n * @param {DateTime} datetime Datetime for which civil dawn is calculated. Should\n *     always contain a timezone or be in UTC, lone UTC offsets might lead to\n *     unexpected behaviour.\n * @param {number} phi Latitude of target location.\n * @param {number} L longitude of target location.\n * @returns {(DateTime|string)} Time of civil dawn or a string indicating that no\n *     event could be calculated as the sun was too high ('SUN_HIGH') or too low\n *     ('SUN_LOW') during the entire day (unless returnTimeForNoEventCase is true).\n */\nconst civilDawn = function (datetime, phi, L) {\n    try {\n        return sunRiseSet(datetime, phi, L, 'RISE', 6);\n    } catch (err) {\n        return handleNoEventCase(datetime, err, 5, 30);\n    }\n};\n\n/**\n * Calculates civil dusk (sun 6° below horizon) on the provided date.\n * @param {DateTime} datetime Datetime for which civil dusk is calculated. Should\n *     always contain a timezone or be in UTC, lone UTC offsets might lead to\n *     unexpected behaviour.\n * @param {number} phi Latitude of target location.\n * @param {number} L longitude of target location.\n * @returns {(DateTime|string)} Time of civil dusk or a string indicating that no\n *     event could be calculated as the sun was too high ('SUN_HIGH') or too low\n *     ('SUN_LOW') during the entire day (unless returnTimeForNoEventCase is true).\n */\nconst civilDusk = function (datetime, phi, L) {\n    try {\n        return sunRiseSet(datetime, phi, L, 'SET', 6);\n    } catch (err) {\n        return handleNoEventCase(datetime, err, 18, 30);\n    }\n};\n\n/**\n * Calculates nautical dawn (sun 12° below horizon) on the provided date.\n * @param {DateTime} datetime Datetime for which nautical dawn is calculated.\n *     Should always contain a timezone or be in UTC, lone UTC offsets might\n *     lead to unexpected behaviour.\n * @param {number} phi Latitude of target location.\n * @param {number} L longitude of target location.\n * @returns {(DateTime|string)} Time of nautical dawn or a string indicating that no\n *     event could be calculated as the sun was too high ('SUN_HIGH') or too low\n *     ('SUN_LOW') during the entire day (unless returnTimeForNoEventCase is true).\n */\nconst nauticalDawn = function (datetime, phi, L) {\n    try {\n        return sunRiseSet(datetime, phi, L, 'RISE', 12);\n    } catch (err) {\n        return handleNoEventCase(datetime, err, 5);\n    }\n};\n\n/**\n * Calculates nautical dusk (sun 12° below horizon) on the provided date.\n * @param {DateTime} datetime Datetime for which nautical dusk is calculated.\n *     Should always contain a timezone or be in UTC, lone UTC offsets might\n *     lead to unexpected behaviour.\n * @param {number} phi Latitude of target location.\n * @param {number} L longitude of target location.\n * @returns {(DateTime|string)} Time of nautical dusk or a string indicating that no\n *     event could be calculated as the sun was too high ('SUN_HIGH') or too low\n *     ('SUN_LOW') during the entire day (unless returnTimeForNoEventCase is true).\n */\nconst nauticalDusk = function (datetime, phi, L) {\n    try {\n        return sunRiseSet(datetime, phi, L, 'SET', 12);\n    } catch (err) {\n        return handleNoEventCase(datetime, err, 19);\n    }\n};\n\n/**\n * Calculates astronomical dawn (sun 18° below horizon) on the provided date.\n * @param {DateTime} datetime Datetime for which astronomical dawn is calculated.\n *     Should always contain a timezone or be in UTC, lone UTC offsets might\n *     lead to unexpected behaviour.\n * @param {number} phi Latitude of target location.\n * @param {number} L longitude of target location.\n * @returns {(DateTime|string)} Time of astronomical dawn or a string indicating that no\n *     event could be calculated as the sun was too high ('SUN_HIGH') or too low\n *     ('SUN_LOW') during the entire day (unless returnTimeForNoEventCase is true).\n */\nconst astronomicalDawn = function (datetime, phi, L) {\n    try {\n        return sunRiseSet(datetime, phi, L, 'RISE', 18);\n    } catch (err) {\n        return handleNoEventCase(datetime, err, 4, 30);\n    }\n};\n\n/**\n * Calculates astronomical dusk (sun 18° below horizon) on the provided date.\n * @param {DateTime} datetime Datetime for which astronomical dusk is calculated.\n *     Should always contain a timezone or be in UTC, lone UTC offsets might\n *     lead to unexpected behaviour.\n * @param {number} phi Latitude of target location.\n * @param {number} L longitude of target location.\n * @returns {(DateTime|string)} Time of astronomical dusk or a string indicating that no\n *     event could be calculated as the sun was too high ('SUN_HIGH') or too low\n *     ('SUN_LOW') during the entire day (unless returnTimeForNoEventCase is true).\n */\nconst astronomicalDusk = function (datetime, phi, L) {\n    try {\n        return sunRiseSet(datetime, phi, L, 'SET', 18);\n    } catch (err) {\n        return handleNoEventCase(datetime, err, 19, 30);\n    }\n};\n\n/**\n * Calculates solar noon on the provided date.\n * @param {DateTime} datetime Datetime for which solar noon is calculated. Should\n *     always contain a timezone or be in UTC, lone UTC offsets might lead to\n *     unexpected behaviour.\n * @param {number} L longitude of target location.\n * @returns {DateTime} Time of solar noon at the given longitude.\n */\nconst solarNoon = function (datetime, L) {\n    return sunTransit(datetime, L);\n};\n\n/**\n * Calculates all moons of the given phase that occur within the given\n * Gregorian calendar year.\n * @param {int} year Year for which moon phases should be calculated.\n * @param {int} phase 0 -> new moon, 1 -> first quarter,\n *                    2 -> full moon, 3 -> last quarter.\n * @param {string} timezone Optional: IANA timezone string.\n * @returns {array} Array of moment objects for moons of the given phase.\n */\nconst yearMoonPhases = function (year, phase, timezone = 'UTC') {\n    const yearBegin = luxon.DateTime.fromObject(\n        // eslint-disable-next-line sort-keys\n        { year, month: 1, day: 1, hour: 0, minute: 0, second: 0, zone: timezone });\n    const yearEnd = luxon.DateTime.fromObject(\n        // eslint-disable-next-line sort-keys\n        { year: year + 1, month: 1, day: 1, hour: 0, minute: 0, second: 0, zone: timezone });\n    // this will give us k for the first new moon of the year or earlier\n    let k = Math.floor(approxK(yearBegin)) - 1;\n    // taking 15 events will make sure we catch every event in the year\n    const phaseTimes = [];\n    let JDE;\n    let moonDatetime;\n    let deltaT;\n    for (let i = 0; i < 15; i++) {\n        JDE = truePhase(k, phase);\n        // we pretend it's JD and not JDE\n        moonDatetime = JDToDatetime(JDE).setZone(timezone);\n        // now use that to calculate deltaT\n        deltaT = DeltaT(moonDatetime);\n        if (deltaT > 0) {\n            moonDatetime = moonDatetime.minus({ seconds: Math.abs(deltaT) });\n        } else {\n            moonDatetime = moonDatetime.plus({ seconds: Math.abs(deltaT) });\n        }\n        if (roundToNearestMinute) {\n            moonDatetime = moonDatetime.plus({ seconds: 30 }).set({ second: 0 });\n        }\n        if (moonDatetime >= yearBegin && moonDatetime < yearEnd) {\n            phaseTimes.push(moonDatetime);\n        }\n        k++;\n    }\n    return phaseTimes;\n};\n\nexport {\n    options, formatCI, sunrise, sunset, civilDawn, civilDusk, nauticalDawn, nauticalDusk, astronomicalDawn,\n    astronomicalDusk, solarNoon, yearMoonPhases, roundToNearestMinute, returnTimeForNoEventCase,\n};\n"],"names":["JDToDatetime","JD","Z","Math","floor","F","A","alpha","B","C","D","E","fracDay","day","hour","minute","second","month","year","luxon","fromISO","zone","set","datetimeToT","datetime","Y","M","datetimeToJD","DeltaT","u","t","y","approxK","deg2rad","deg","rad2deg","rad","sind","sin","cosd","cos","reduceAngle","angle","polynomial","variable","coeffs","varPower","sum","numCoeffs","length","i","interpolateFromThree","y1","y2","y3","n","normalize","a","b","c","sunMeanAnomaly","sunMeanLongitude","meanObliquityOfEcliptic","moonArgumentOfLatitude","moonAscendingNodeLongitude","moonMeanAnomaly","moonMeanElongation","nutations","sunRiseSet","phi","L","flag","m","offset","timezone","suntime","setZone","keepLocalTime","timeConversions","T","Theta0","apparentSiderealTimeGreenwich","TD","sunApparentRightAscension","delta","sunApparentDeclination","H0","approxLocalHourAngle","m0","normalizeM","counter","DeltaM","abs","sunRiseSetCorrection","plus","seconds","minus","roundToNearestMinute","handleNoEventCase","date","errorCode","returnTimeForNoEventCase","returnDate","minutes","isInDST","cosH0","auxMath","noEventCodes","SUN_HIGH","SUN_LOW","acos","utcOffset","localM","sunTransitCorrection","theta0","interpolatedRa","localHourAngle","interpolatedDec","H","altitude","asin","alpha1","alpha2","alpha3","delta1","delta2","delta3","Omega","epsilon","trueObliquityOfEcliptic","lambda","sunApparentLongitude","atan2","meanSiderealTimeGreenwich","theta","nutationInLongitude","nutationInObliquity","constants","Sol","sunTrueLongitude","sunEquationOfCenter","sineArg","MPrime","DeltaPsi","cosArg","DeltaEpsilon","L0","MIDNIGHT_SUN","NO_ASTRONOMICAL_DAWN","NO_ASTRONOMICAL_DUSK","NO_CIVIL_DAWN","NO_CIVIL_DUSK","NO_NAUTICAL_DAWN","NO_NAUTICAL_DUSK","POLAR_NIGHT","truePhase","k","phase","eccentricityCorrection","JDE","meanPhase","planetaryArguments","DeltaJDE","newMoonFullMoonCorrections","quarterCorrections","commonCorrections","W","dateFormatKeys","err","formatString","noEventCode","datestring","toFormat","options","_typeof","transit","sunTransit","moonDatetime","deltaT","yearBegin","fromObject","yearEnd","phaseTimes","push"],"mappings":"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"}